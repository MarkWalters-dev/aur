# This file was generated by GoReleaser. DO NOT EDIT.
# Maintainer: Alexander Sharov <kvendingoldo@gmail.com>
# Maintainer: chaseme <aur@chase.ninja>
# Contributor: Alexander Sharov <kvendingoldo@gmail.com>
# Contributor: chaseme <aur@chase.ninja>

pkgname='tenv-bin'
pkgver=3.2.10
pkgrel=1
pkgdesc='OpenTofu, Terraform, Terragrunt, and Atmos version manager, written in Go.'
url='https://tofuutils.github.io/tenv/'
arch=('aarch64' 'i686' 'x86_64')
license=('Apache-2.0')
provides=('atmos' 'tenv' 'terraform' 'terragrunt' 'tf' 'tofu')
conflicts=('atmos' 'atmos-bin' 'opentofu' 'opentofu-bin' 'opentofu-bin-stable' 'opentofu-git' 'terraform' 'terragrunt' 'tfenv' 'tgenv' 'tofuenv')
optdepends=('cosign: package validation for OpenTofu')

source_aarch64=("${pkgname}_${pkgver}_aarch64.tar.gz::https://github.com/tofuutils/tenv/releases/download/v3.2.10/tenv_v3.2.10_Linux_arm64.tar.gz")
sha256sums_aarch64=('79748226cdde7d221b67879777527ad15dc67bc75f2540af865079d4f2729614')

source_i686=("${pkgname}_${pkgver}_i686.tar.gz::https://github.com/tofuutils/tenv/releases/download/v3.2.10/tenv_v3.2.10_Linux_i386.tar.gz")
sha256sums_i686=('02c512e665c90934ff6ad470cdfb703d05739504830865cfadba1ef989e4c444')

source_x86_64=("${pkgname}_${pkgver}_x86_64.tar.gz::https://github.com/tofuutils/tenv/releases/download/v3.2.10/tenv_v3.2.10_Linux_x86_64.tar.gz")
sha256sums_x86_64=('4af0aceb2e2cee3b927e4ad1f9416b964bd7a1c3d3593d5647110f97dbf5af82')

package() {
  # bin
  install -Dm 0755 "atmos" "${pkgdir}/usr/bin/atmos"
  install -Dm 0755 "tenv" "${pkgdir}/usr/bin/tenv"
  install -Dm 0755 "terraform" "${pkgdir}/usr/bin/terraform"
  install -Dm 0755 "terragrunt" "${pkgdir}/usr/bin/terragrunt"
  install -Dm 0755 "tf" "${pkgdir}/usr/bin/tf"
  install -Dm 0755 "tofu" "${pkgdir}/usr/bin/tofu"

  # license
  install -Dm 0644 "LICENSE" "${pkgdir}/usr/share/licenses/tenv/LICENSE"
  install -Dm 0644 "LICENSE" "${pkgdir}/usr/share/doc/tenv/LICENSE"

  # readme
  install -Dm 0644 "README.md" "${pkgdir}/usr/share/doc/tenv/README.md"

  # completions
  mkdir -p "${pkgdir}/usr/share/bash-completion/completions/"
  mkdir -p "${pkgdir}/usr/share/zsh/site-functions/"
  mkdir -p "${pkgdir}/usr/share/fish/vendor_completions.d/"

  for i in bash fish zsh; do
  ./tenv completion $i > ./tenv.$i
  done

  install -Dm644 "./tenv.bash" "${pkgdir}/usr/share/bash-completion/completions/tenv"
  install -Dm644 "./tenv.zsh" "${pkgdir}/usr/share/zsh/site-functions/tenv"
  install -Dm644 "./tenv.fish" "${pkgdir}/usr/share/fish/vendor_completions.d/tenv.fish"
}
