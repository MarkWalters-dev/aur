diff --git a/CMakeLists.txt b/CMakeLists.txt
index 6b9a7a3af..2b43295c5 100644
--- a/CMakeLists.txt
+++ b/CMakeLists.txt
@@ -241,6 +241,13 @@ else()
   endif()
 endif()
 
+# Needed for arch: https://github.com/protocolbuffers/protobuf/issues/15604
+if (Protobuf_VERSION VERSION_GREATER_EQUAL 4)
+    find_package(absl REQUIRED)
+
+    set(PROTOBUF_LIBS ${PROTOBUF_LIBS} absl::log_internal_check_op)
+endif()
+
 if(SELINUX_FOUND)
   set(CMAKE_CXX_FLAGS "${CMAKE_CXX_FLAGS} -DWITH_SELINUX")
 else()
