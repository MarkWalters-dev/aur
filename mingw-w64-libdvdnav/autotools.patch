diff -ruN libdvdnav/configure.ac patched/configure.ac
--- libdvdnav/configure.ac	2024-06-24 00:15:06.774755894 +0200
+++ patched/configure.ac	2024-06-24 00:17:43.743236546 +0200
@@ -75,6 +75,9 @@
 AS_CASE([$host],
   [*mingw32* | *cygwin*], [AC_CHECK_FUNCS(gettimeofday)])
 
+AS_CASE([$host],
+  [*mingw32* | *cygwin*], LDFLAGS="-no-undefined ${wl}-no-undefined ${wl}-export-all-symbols $LDFLAGS")
+
 dnl ---------------------------------------------
 dnl threads
 dnl ---------------------------------------------
diff -ruN libdvdnav/ltmain.sh patched/ltmain.sh
--- libdvdnav/ltmain.sh	2024-06-24 00:15:14.887493862 +0200
+++ patched/ltmain.sh	2024-06-24 00:16:37.071462670 +0200
@@ -8063,6 +8063,12 @@
 	    deplibs="$deplib $deplibs"
 	    continue
 	  fi
+          case $deplib in
+          *.dll.a)
+	    deplibs="$deplib $deplibs"
+	    continue
+          ;;
+          esac
 	  case $linkmode in
 	  lib)
 	    # Linking convenience modules into shared libraries is allowed,
diff -ruN libdvdnav/m4/libtool.m4 patched/m4/libtool.m4
--- libdvdnav/m4/libtool.m4	2024-06-24 00:15:14.970821081 +0200
+++ patched/m4/libtool.m4	2024-06-24 00:16:37.074795759 +0200
@@ -3482,7 +3482,8 @@
   # Base MSYS/MinGW do not provide the 'file' command needed by
   # func_win32_libid shell function, so use a weaker test based on 'objdump',
   # unless we find 'file', for example because we are cross-compiling.
-  if ( file / ) >/dev/null 2>&1; then
+  # func_win32_libid assumes BSD nm, so disallow it if using MS dumpbin.
+  if ( test "$lt_cv_nm_interface" = "BSD nm" && file / ) >/dev/null 2>&1; then
     lt_cv_deplibs_check_method='file_magic ^x86 archive import|^x86 DLL'
     lt_cv_file_magic_cmd='func_win32_libid'
   else
