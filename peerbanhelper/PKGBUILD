# Generated by debtap
# Maintainer: vcup
# Contributor: vcup
pkgname=peerbanhelper
pkgver=6.4.8
pkgrel=1
pkgdesc="PeerBanHelper is a tool to auto ban peers on the bitorrent network."
arch=('any')
url="https://github.com/PBH-BTN/PeerBanHelper"
license=('GPLv3')
depends=('java-runtime>=21')
backup=('etc/peerbanhelper/config.yml')
install=${pkgname}.install
source=("https://github.com/PBH-BTN/PeerBanHelper/releases/download/v${pkgver}/peerbanhelper_${pkgver}_all.deb")
sha512sums=('4ecdbe282298028acd3c1e99a848ea3fec34ff8ca6a6b2e5267c497152b4aded61485c2e690ed5b2df1a0100e863e4b218832d96521e9b349d4de1bc50f914bb')

package() {
  # Extract package data
  tar -xI unzstd -f data.tar.zst -C "${pkgdir}"

  mv "${pkgdir}/etc/peerbanhelper/data/"{config.yml,profile.yml} "${pkgdir}/etc/peerbanhelper"
  rm -d "${pkgdir}/etc/peerbanhelper/data"

  sed 's|/etc/'${pkgname}'|/var/lib/'${pkgname}'|g' -i "${pkgdir}/usr/lib/systemd/system/${pkgname}.service" 

  install -D -m644 "${pkgdir}/usr/share/doc/peerbanhelper/copyright" "${pkgdir}/usr/share/licenses/${pkgname}/LICENSE"
}
